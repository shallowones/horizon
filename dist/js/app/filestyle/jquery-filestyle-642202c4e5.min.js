"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){var n=0,a=function(e,t){this.options=t,this.$elementjFilestyle=[],this.$element=o(e)};a.prototype={clear:function(){this.$element.val(""),this.$elementjFilestyle.find(":text").val(""),this.$elementjFilestyle.find(".count-jfilestyle").remove()},destroy:function(){this.$element.removeAttr("style").removeData("jfilestyle").val(""),this.$elementjFilestyle.remove()},dragdrop:function(e){return!0!==e&&!1!==e?this.options.dragdrop:void(this.options.dragdrop=e)},disabled:function(e){if(!0===e)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementjFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(!1!==e)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementjFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(e){if(!0===e)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementjFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(!1!==e)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementjFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},input:function(e){if(!0===e)this.options.input||(this.options.input=!0,this.$elementjFilestyle.find("label").before(this.htmlInput()),this.$elementjFilestyle.find(".count-jfilestyle").remove(),this.pushNameFiles());else{if(!1!==e)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementjFilestyle.find(":text").remove();var t=this.pushNameFiles();0<t.length&&this.$elementjFilestyle.find("label").append(' <span class="count-jfilestyle">'+t.length+"</span>")}}},text:function(e){return void 0===e?this.options.text:(this.options.text=e,void this.$elementjFilestyle.find("label span").html(this.options.text))},theme:function(e){return void 0===e?this.options.theme:(console.log(this.$elementjFilestyle.attr("class").replace(/.*(jfilestyle-theme-.*).*/,"$1")),this.$elementjFilestyle.removeClass(this.$elementjFilestyle.attr("class").replace(/.*(jfilestyle-theme-.*).*/,"$1")),this.options.theme=e,void this.$elementjFilestyle.addClass("jfilestyle-theme-"+this.options.theme))},inputSize:function(e){return void 0===e?this.options.inputSize:(this.options.inputSize=e,void this.$elementjFilestyle.find(":text").css("width",this.options.inputSize))},placeholder:function(e){return void 0===e?this.options.placeholder:(this.options.placeholder=e,void this.$elementjFilestyle.find(":text").attr("placeholder",e))},htmlInput:function(){return this.options.input?'<input type="text" style="width:'+this.options.inputSize+'" placeholder="'+this.options.placeholder+'" disabled> ':""},pushNameFiles:function(){var e="",t=[];void 0===this.$element[0].files?t[0]={name:this.$element.value}:t=this.$element[0].files;for(var i=0;i<t.length;i++)e+=t[i].name.split("\\").pop()+", ";return""!==e?this.$elementjFilestyle.find(":text").val(e.replace(/\, $/g,"")):this.$elementjFilestyle.find(":text").val(""),t},constructor:function(){var i=this,e="",t=i.$element.attr("id");""!==t&&t||(t="jfilestyle-"+n,i.$element.attr({id:t}),n++),e='<span class="focus-jfilestyle"><label for="'+t+'" '+(i.options.disabled?'disabled="true"':"")+"><span>"+i.options.text+"</span></label></span>",!0===i.options.buttonBefore?e+=i.htmlInput():e=i.htmlInput()+e,i.$elementjFilestyle=o('<div class="jfilestyle '+(i.options.input?"jfilestyle-corner":"")+" "+(this.options.buttonBefore?" jfilestyle-buttonbefore":"")+" "+(i.options.theme?"jfilestyle-theme-"+i.options.theme:"")+'"><div name="filedrag"></div>'+e+"</div>"),i.$elementjFilestyle.find(".focus-jfilestyle").attr("tabindex","0").keypress(function(e){return 13===e.keyCode||32===e.charCode?(i.$elementjFilestyle.find("label").click(),!1):void 0}),i.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(i.$elementjFilestyle),i.options.disabled&&i.$element.attr("disabled","true"),i.$elementjFilestyle.find('[name="filedrag"]').css({position:"absolute",width:"100%",height:i.$elementjFilestyle.height()+"px","z-index":-1}),i.$element.change(function(){var e=i.pushNameFiles();0==i.options.input?0==i.$elementjFilestyle.find(".count-jfilestyle").length?i.$elementjFilestyle.find("label").append(' <span class="count-jfilestyle">'+e.length+"</span>"):0==e.length?i.$elementjFilestyle.find(".count-jfilestyle").remove():i.$elementjFilestyle.find(".count-jfilestyle").html(e.length):i.$elementjFilestyle.find(".count-jfilestyle").remove(),i.options.onChange(e)}),-1<window.navigator.userAgent.search(/firefox/i)&&this.$elementjFilestyle.find("label").click(function(){return i.$element.click(),!1}),o(document).on("dragover",function(e){e.preventDefault(),e.stopPropagation(),i.options.dragdrop||o('[name="filedrag"]').css("z-index","9")}).on("drop",function(e){e.preventDefault(),e.stopPropagation(),i.options.dragdrop||o('[name="filedrag"]').css("z-index","-1")}),i.$elementjFilestyle.find('[name="filedrag"]').on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}).on("drop",function(e){if(e.originalEvent.dataTransfer&&!i.options.disabled&&i.options.dragdrop&&e.originalEvent.dataTransfer.files.length){e.preventDefault(),e.stopPropagation(),i.$element[0].files=e.originalEvent.dataTransfer.files;var t=i.pushNameFiles();0==i.options.input?0==i.$elementjFilestyle.find(".count-jfilestyle").length?i.$elementjFilestyle.find("label").append(' <span class="count-jfilestyle">'+t.length+"</span>"):0==t.length?i.$elementjFilestyle.find(".count-jfilestyle").remove():i.$elementjFilestyle.find(".count-jfilestyle").html(t.length):i.$elementjFilestyle.find(".count-jfilestyle").remove(),o('[name="filedrag"]').css("z-index","-1")}})}};var e=o.fn.jfilestyle;o.fn.jfilestyle=function(n,l){var s="",e=this.each(function(){if("file"===o(this).attr("type")){var e=o(this),t=e.data("jfilestyle"),i=o.extend({},o.fn.jfilestyle.defaults,n,"object"==(void 0===n?"undefined":_typeof(n))&&n);t||(e.data("jfilestyle",t=new a(this,i)),t.constructor()),"string"==typeof n&&(s=t[n](l))}});return void 0!==(void 0===s?"undefined":_typeof(s))?s:e},o.fn.jfilestyle.defaults={text:"Choose file",input:!0,disabled:!1,buttonBefore:!1,inputSize:"200px",placeholder:"",dragdrop:!0,theme:"default",onChange:function(){}},o.fn.jfilestyle.noConflict=function(){return o.fn.jfilestyle=e,this},o(function(){o(".jfilestyle").each(function(){var e=o(this),t={text:e.attr("data-text"),input:"false"!==e.attr("data-input"),disabled:"true"===e.attr("data-disabled"),buttonBefore:"true"===e.attr("data-buttonBefore"),inputSize:e.attr("data-inputSize"),placeholder:e.attr("data-placeholder"),theme:e.attr("data-theme"),dragdrop:"false"!==e.attr("data-dragdrop")};e.jfilestyle(t)})})}(window.jQuery);